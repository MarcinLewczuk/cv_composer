<div class="bg-white rounded-lg shadow-md p-8 mb-8">
  <h2 class="text-2xl font-bold text-gray-900 mb-6">Upload Your CV</h2>
  
  <!-- Upload Area -->
  <div class="border-2 border-dashed border-orange-300 rounded-lg p-8 text-center mb-6 hover:border-orange-600 transition cursor-pointer" 
       (click)="fileInput.click()">
    <svg class="mx-auto h-12 w-12 text-orange-600 mb-4" stroke="currentColor" fill="none" viewBox="0 0 48 48">
      <path d="M28 8H12a4 4 0 00-4 4v20a4 4 0 004 4h24a4 4 0 004-4V20m-14-12v12m0 0l4-4m-4 4l-4-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    
    <h3 class="mt-2 text-lg font-medium text-gray-900">Upload CV File</h3>
    <p class="mt-1 text-sm text-gray-600">or drag and drop</p>
    <p class="mt-1 text-xs text-gray-500">PDF, DOC, DOCX, or TXT (max 10MB)</p>
    
    <input #fileInput type="file" hidden accept=".pdf,.doc,.docx,.txt" (change)="onFileSelected($event)"/>
  </div>

  <!-- Selected File Display -->
  <div *ngIf="selectedFile" class="mb-6">
    <div class="flex items-center justify-between bg-orange-50 border border-orange-200 rounded-lg p-4">
      <div class="flex items-center gap-3">
        <svg class="h-8 w-8 text-orange-600" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13 8V2H7a2 2 0 00-2 2v16a2 2 0 002 2h10a2 2 0 002-2v-9z"/>
          <path d="M13 2v6h6"/>
        </svg>
        <div>
          <p class="font-semibold text-gray-900">{{ selectedFile.name }}</p>
          <p class="text-sm text-gray-600">{{ formatFileSize(selectedFile.size) }}</p>
        </div>
      </div>
      <button type="button" (click)="selectedFile = null" class="text-gray-400 hover:text-gray-600">
        <span class="text-2xl">&times;</span>
      </button>
    </div>
  </div>

  <!-- Messages -->
  <div *ngIf="uploadError" class="mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
    {{ uploadError }}
  </div>

  <div *ngIf="uploadMessage && !uploadError" class="mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg">
    {{ uploadMessage }}
  </div>

  <!-- Upload Button -->
  <button 
    (click)="uploadFile()" 
    [disabled]="isUploading || !selectedFile"
    class="w-full bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 text-white font-semibold py-3 rounded-lg transition">
    <span *ngIf="!isUploading">Upload CV</span>
    <span *ngIf="isUploading">Uploading...</span>
  </button>
</div>

<!-- Uploaded Files -->
<div *ngIf="uploadedFiles.length > 0" class="bg-white rounded-lg shadow-md p-8">
  <h3 class="text-xl font-bold text-gray-900 mb-6">Your Uploaded CVs</h3>
  
  <div class="overflow-x-auto">
    <table class="w-full text-left text-sm">
      <thead class="bg-gray-50 border-b">
        <tr>
          <th class="px-4 py-3 font-semibold text-gray-900">File Name</th>
          <th class="px-4 py-3 font-semibold text-gray-900">Size</th>
          <th class="px-4 py-3 font-semibold text-gray-900">Date Uploaded</th>
          <th class="px-4 py-3 font-semibold text-gray-900">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let file of uploadedFiles" class="border-b hover:bg-gray-50">
          <td class="px-4 py-3 text-gray-900">{{ file.originalFileName }}</td>
          <td class="px-4 py-3 text-gray-600">{{ formatFileSize(file.fileSize) }}</td>
          <td class="px-4 py-3 text-gray-600">{{ formatDate(file.createdAt) }}</td>
          <td class="px-4 py-3">
            <button 
              (click)="downloadFile(file.filePath, file.originalFileName)"
              class="text-orange-600 hover:text-orange-700 font-semibold">
              Download
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div *ngIf="uploadedFiles.length === 0 && !isUploading" class="text-center text-gray-500 mt-8">
  <p>No files uploaded yet</p>
</div>
